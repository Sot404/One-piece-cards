<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive List</title>
  <link rel="stylesheet" href="style.css" />

  <!-- FIREBASE INIT -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBWWmGswBH-vV6B3LI-DbApXW0h3FnMMzE",
      authDomain: "one-piece-by-soriris.firebaseapp.com",
      databaseURL: "https://one-piece-by-soriris-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "one-piece-by-soriris",
      storageBucket: "one-piece-by-soriris.firebasestorage.app",
      messagingSenderId: "523884705326",
      appId: "1:523884705326:web:b2b5e1a6487cc0e3fb11bf"
    };

    window.firebaseApp = initializeApp(firebaseConfig);
    window.firebaseDB = getDatabase(window.firebaseApp);
  </script>
</head>

<body>

<header>
  <div class="tabs">
    <button class="tab active" data-tab="Marira">My Room</button>
    <button class="tab" data-tab="Soriris">Joined Room</button>
    <button class="tab" data-tab="Total">Total</button>
  </div>

  <div class="room-bar">
    <span>My code:</span>
    <code id="myRoomCode">â€”</code>
    <button id="copyCodeBtn" title="Copy code">Copy</button>
    <span id="statusText" style="margin-left:12px; opacity:.8;"></span>
  </div>

  <div class="top-controls">
    <input type="text" id="searchInput" placeholder="Search number or textâ€¦" />

    <select id="filterSelect">
      <option value="all">All</option>
      <option value="found">Found</option>
      <option value="missing">Missing</option>
    </select>

    <select id="sortSelect">
      <option value="number">Sort by number</option>
      <option value="count">Sort by count</option>
    </select>

    <select id="totalSourceSelect" class="hidden">
      <option value="Marira">Prefer My Room</option>
      <option value="Soriris">Prefer Joined Room</option>
    </select>

    <button id="addBtn">Add Card</button>
    <button id="tradeBtn">Trade</button>

    <!-- NEW: Save local -->
    <button id="exportBtn" title="Save locally">ðŸ’¾</button>

    <!-- NEW: Join -->
    <button id="mergeBtn">Join</button>

    <!-- NEW: Rename my room -->
    <button id="renameBtn" title="Rename my room">Rename</button>
  </div>
</header>

<main>
  <div id="globalTotal" class="global-total hidden"></div>
  <ul id="list"></ul>
</main>

<!-- ADD / EDIT MODAL -->
<div id="modalOverlay" class="hidden">
  <div class="modal">
    <h3 id="modalTitle">Add Card</h3>

    <label>
      Number (1â€“200)
      <input type="number" id="modalNumber" min="1" max="200">
    </label>

    <label>
      Description
      <textarea id="modalText"></textarea>
    </label>

    <label class="checkbox">
      <input type="checkbox" id="modalGlow"> Glow (ðŸ’Ž)
    </label>

    <div class="modal-actions">
      <button id="modalCancel">Cancel</button>
      <button id="modalSave">Save</button>
    </div>
  </div>
</div>

<!-- TRADE MODAL -->
<div id="tradeOverlay" class="hidden">
  <div class="modal trade">
    <h2>Trade</h2>

    <div class="trade-columns">
      <div>
        <h3>Marira â†’ Soriris</h3>
        <ul id="tradeMarira"></ul>
      </div>

      <div>
        <h3>Soriris â†’ Marira</h3>
        <ul id="tradeSoriris"></ul>
      </div>
    </div>

    <div class="modal-actions">
      <button id="tradeClose">Close</button>
    </div>
  </div>
</div>

<!-- MAIN ENTRY -->
<script type="module" src="js/main.js"></script>

</body>
</html>
